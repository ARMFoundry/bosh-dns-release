---
name: dns-windows

templates:
  aliases.json.erb: dns/aliases.json
  config.json.erb: config/config.json
  dns_ctl.ps1.erb: bin/dns_ctl.ps1
  post-start.ps1.erb: bin/post-start.ps1

packages:
  - dns-windows

provides: []

consumes: []

properties:
  address:
    description: "Address in which the DNS server will bind"
    default: 169.254.0.2
  aliased_address:
    description: "Address that will be added by default"
    default: 169.254.0.2
  recursors:
    description: "Addresses of upstream DNS servers used for recursively resolving queries"
    default: []
  records_file:
    description: "Path to the file containing information that the DNS server will use to create DNS records"
    default: C:\var\vcap\instance\dns\records.json
  alias_files_glob:
    description: "Glob for any files to look for DNS alias information"
    default: C:\var\vcap\jobs\*\dns\aliases.json
  aliases:
    description: "Hash of domain key to target domains array for aliased DNS lookups"
    example:
      cc.cf.consul: [ one, two, ... ]
      third.internal: [ four ]
  healthcheck_domains:
    description: "Domain names that the dns server should respond to with successful answers. Answer ip will always be 127.0.0.1"
    default:
      - healthcheck.bosh-dns.
      - consul.service.cf.internal.
