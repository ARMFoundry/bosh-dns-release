#!/bin/bash -exu

RUN_DIR=/var/vcap/sys/run/dns
LOG_DIR=/var/vcap/sys/log/dns
JOB_DIR=/var/vcap/jobs/dns
DNS_PACKAGE=/var/vcap/packages/dns


function create_directories_and_chown_to_vcap() {
  mkdir -p "${LOG_DIR}"
  chown -R vcap:vcap "${LOG_DIR}"

  mkdir -p "${RUN_DIR}"
  chown -R vcap:vcap "${RUN_DIR}"
}

function main() {
  create_directories_and_chown_to_vcap

  setcap cap_net_bind_service=+ep ${DNS_PACKAGE}/bin/dns
}

main
